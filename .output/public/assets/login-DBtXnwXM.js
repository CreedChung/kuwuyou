import{c as I,d as E,r as s,a as F,j as e,L as l}from"./main-Cueo9Gmc.js";import{B as S}from"./button-r6mHSpo9.js";import{C as T,a as z,b as M,c as P,d as b,I as j,e as v}from"./input-DtfU5s6Y.js";import{L as y}from"./label-CMEA9w--.js";import{T as R,a as B,b as N,c as w}from"./tabs-BrqVxw46.js";import{u as A}from"./useAuth-C84NQqcP.js";import{M as D}from"./mail-BIlgwzcl.js";import{L as H,E as _}from"./lock-DfvajrVR.js";import{E as O}from"./eye-xgg8ECZi.js";import"./index-B_YAqH_L.js";import"./index-CZGrV-Ob.js";import"./index-CuHsL6Sm.js";const V=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],W=I("log-in",V);function $(){const i=E(),d=s.useId(),m=s.useId(),[x,h]=s.useState(!1),[o,L]=s.useState(!1),[t,u]=s.useState({email:"",password:""}),{signIn:k,user:g,loading:p}=A(),a=F();s.useEffect(()=>{a.initialized||(console.log("登录页面：正在初始化认证状态..."),a.initialize())},[a]),s.useEffect(()=>{g&&!p&&a.initialized&&(console.log("用户已登录，重定向到聊天页面"),i.navigate({to:"/chat"}))},[g,p,a.initialized,i]);const C=async r=>{r.preventDefault();const n=t.email.trim(),f=t.password.trim();if(!n){alert("请输入邮箱");return}if(!f){alert("请输入密码");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){alert("邮箱格式错误");return}h(!0);try{const{error:c}=await k(n,f);c||i.navigate({to:"/chat"})}catch(c){console.error("登录错误:",c)}finally{h(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-cyan-600 to-sky-600 bg-clip-text text-transparent",children:"库无忧助手"})}),e.jsxs(T,{className:"border-white/40 shadow-2xl backdrop-blur-xl bg-white/95 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-gray-50/30 pointer-events-none"}),e.jsxs(z,{className:"relative",children:[e.jsxs(l,{to:"/",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4 transition-colors group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 transition-transform group-hover:-translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("title",{children:"返回箭头"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})]}),e.jsx("span",{className:"font-medium",children:"返回主页"})]}),e.jsx(M,{className:"text-2xl text-center text-gray-800",children:"登录账号"}),e.jsx(P,{className:"text-center text-gray-600",children:"选择登录方式"})]}),e.jsxs(R,{defaultValue:"email",className:"w-full",children:[e.jsxs(B,{className:"grid max-w-sm grid-cols-2 mx-auto mb-6",children:[e.jsx(N,{value:"email",children:"邮箱登录"}),e.jsx(N,{value:"dingtalk",children:"钉钉登录"})]}),e.jsx(w,{value:"email",children:e.jsxs("form",{onSubmit:C,children:[e.jsxs(b,{className:"space-y-4 relative",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:d,className:"text-gray-700",children:"邮箱地址"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-600"}),e.jsx(j,{id:d,type:"email",placeholder:"your@email.com",value:t.email,onChange:r=>u({...t,email:r.target.value}),className:"pl-10 bg-white/80 border-gray-300 text-gray-900 placeholder:text-gray-500 focus:border-blue-600 focus:ring-blue-600/20 transition-all"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:m,className:"text-gray-700",children:"密码"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-600"}),e.jsx(j,{id:m,type:o?"text":"password",placeholder:"••••••••",value:t.password,onChange:r=>u({...t,password:r.target.value}),className:"pl-10 pr-10 bg-white/80 border-gray-300 text-gray-900 placeholder:text-gray-500 focus:border-blue-600 focus:ring-blue-600/20 transition-all"}),e.jsx("button",{type:"button",onClick:()=>L(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-800 transition-colors",children:o?e.jsx(_,{className:"w-4 h-4"}):e.jsx(O,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 bg-white text-blue-600 focus:ring-blue-600/20 transition-all"}),e.jsx("span",{className:"text-gray-600 group-hover:text-gray-800 transition-colors",children:"记住我"})]})})]}),e.jsxs(v,{className:"flex flex-col gap-4 relative",children:[e.jsx(S,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-medium shadow-lg shadow-blue-600/30 transition-all transform hover:scale-[1.02] active:scale-[0.98]",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"登录中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"登录"]})}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["还没有账号?"," ",e.jsx(l,{to:"/auth/register",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",children:"立即注册"})]})]})]})}),e.jsxs(w,{value:"dingtalk",children:[e.jsx(b,{className:"space-y-4 relative py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"w-48 h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"钉钉扫码区域"})}),e.jsx("p",{className:"text-gray-600 text-sm",children:"请使用钉钉扫码登录"})]})}),e.jsx(v,{className:"flex flex-col gap-4 relative",children:e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["还没有账号?"," ",e.jsx(l,{to:"/auth/register",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium transition-colors",children:"立即注册"})]})})]})]})]}),e.jsxs("p",{className:"text-center text-xs text-gray-600 mt-6",children:["继续即表示您同意我们的"," ",e.jsx(l,{to:"/terms",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"服务条款"})," ","和"," ",e.jsx(l,{to:"/privacy",className:"text-blue-600 hover:text-blue-700 hover:underline transition-colors",children:"隐私政策"})]})]})})}function re(){return e.jsx($,{})}export{re as component};
